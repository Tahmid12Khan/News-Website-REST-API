<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>

    <link rel="import" href="import-headers.html">
    <script type='text/javascript' language='javascript' src='/js/delete-news.js'></script>

</head>
<body>

<div class="jumbotron text-center" style="margin-bottom:0">
    <h1>Welcome to ABC News Portal</h1>

</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <a class="navbar-brand" href="add-news">Add News</a>


    <div class="form-inline my-2 my-lg-0" style="float: right;">
        <h3 style="color: aliceblue" sec:authorize="isAuthenticated()">Welcome <span sec:authentication="name"></span> </h3>

        <a sec:authorize="isAuthenticated()" th:href="@{/logout}"  th:method="post">
            <button class="btn btn-outline-warning mr-sm-2 my-2 my-sm-0">Log Out</button>
        </a>
        <a sec:authorize="!isAuthenticated()"  th:href="@{/login}">
            <button class="btn btn-outline-success mr-sm-2 my-2 my-sm-0 ">Log In</button>
        </a>
        <a sec:authorize="!isAuthenticated()" th:href="@{/register}">
            <button class="btn btn-outline-warning mr-sm-2 my-2 my-sm-0">Register</button>
        </a>


    </div>

</nav>

<div class="container">
    <div class="p-2" th:each="news: ${newsList}">
        <input type="hidden" th:value="${news.getId()}">
        <h2 th:text="${news.title}" th:onclick="'window.location.href=\'/news/' + ${news.getId()} + '\''"></h2>

        <p th:text=" 'By ' +  ${news.author} + ' on ' + ${news.date}"
           th:onclick="'window.location.href=\'/news/' + ${news.getId()} + '\''"></p>
        <p th:text="${news.showFewCharacters()}"
           th:onclick="'window.location.href=\'/news/' + ${news.getId()} + '\''"></p>


        <span class="btn btn-primary btn-sm"
              th:onclick="'window.location.href=\'/news/' + ${news.getId()} + '\''">Read more</span>
        <span class="btn btn-secondary btn-sm"
              th:onclick="'window.location.href=\'/news/download/json/' + ${news.getId()} + '\''">JSON</span>
        <span class="btn btn-secondary btn-sm"
              th:onclick="'window.location.href=\'/news/download/xml/' + ${news.getId()} + '\''">XML</span>


        <span th:if="${session.userid != null}" class="btn btn-warning btn-sm"
              th:onclick="'window.location.href=\'/edit-news/' + ${news.getId()} + '\''">Edit</span>


        <span th:if="${session.userid != null}" class="btn btn-danger btn-sm" name="delete">Delete</span>

    </div>
</div>
<div class="container">

    <div th:if="${newsList.getTotalPages() > 1}">
        <ul class="pagination justify-content-center">
            <li th:class=" ${newsList.number == 0} ? 'page-item disabled' "><a
                    class="page-link"
                    th:href="@{/(page=1)}">«</a>
            </li>
            <li th:class="${newsList.number == 0} ? 'page-item disabled' "><a
                    class="page-link"
                    th:href="@{/(page=${newsList.number})}">←</a>
            </li>
            <li

                    th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}"
                    th:class="${newsList.number == (page - 1)} ? 'page-item active pointer-disabled'">
                <a class="page-link"
                   th:href="@{/(page=${page})}"
                   th:text="${page}"></a>
            </li>
            <li
                    th:class="${newsList.number + 1 == newsList.totalPages} ? 'page-item disabled'">
                <a class="page-link"
                   th:href="@{/( page=${newsList.number + 2})}">→</a>
            </li>
            <li
                    th:class="${newsList.number + 1 == newsList.totalPages} ? 'page-item disabled' ">
                <a class="page-link"
                   th:href="@{/( page=${newsList.totalPages})}">»</a>
            </li>
        </ul>
    </div>
</div>


<script
        src="https://code.jquery.com/jquery-1.11.1.min.js"
        integrity="sha256-VAvG3sHdS5LqTT+5A/aeq/bZGa/Uj04xKxY8KM/w9EE="
        crossorigin="anonymous"></script>
<script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
</body>
</html>